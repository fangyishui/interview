## 微服务是什么

### 技术维度理解
微服务化的核心就是将传统的一站式应用，根据业务拆分成一个一个的服务，彻底地去耦合,每一个微服务提供单个业务功能的服务，一个服务做一件事，从技术角度看就是一种小而独立的处理过程，类似进程概念，能够自行单独启动或销毁，拥有自己独立的数据库。

### 业界大牛马丁.福勒（Martin Fowler） 这样描述微服务：
论文网址：            https://martinfowler.com/articles/microservices.html

就目前而言，对于微服务业界并没有一个统一的、标准的定义（While there is no precise definition of this architectural style）

但通常而言， 微服务架构是一种架构模式或者说是一种架构风格，它提倡将单一应用程序划分成一组小的服务，每个服务运行在其独立的自己的进程中，服务之间互相协调、互相配合，为用户提供最终价值。服务之间采用轻量级的通信机制互相沟通（通常是基于HTTP的RESTful API）。每个服务都围绕着具体业务进行构建，并且能够被独立地部署到生产环境、类生产环境等。另外，应尽量避免统一的、集中式的服务管理机制，对具体的一个服务而言，应根据业务上下文，选择合适的语言、工具对其进行构建，可以有一个非常轻量级的集中式管理来协调这些服务，可以使用不同的语言来编写服务，也可以使用不同的数据存储。


## 微服务与微服务架构

### 微服务
强调的是服务的大小，它关注的是某一个点，是具体解决某一个问题/提供落地对应服务的一个服务应用,
狭意的看,可以看作Eclipse里面的一个个微服务工程/或者Module

### 微服务架构
![](images/微服务概述(一)/image-1650012241062.png)
微服务架构是⼀种架构模式，它提倡将单⼀应⽤程序划分成⼀组⼩的服务，服务之间互相协调、互相配合，为⽤户提供最终价值。每个服务运⾏在其独⽴的进程中，服务与服务间采⽤轻量级的通信机制互相协作（通常是基于HTTP协议的RESTful API）。每个服务都围绕着具体业务进⾏构建，并且能够被独⽴的部署到⽣产环境、类⽣产环境等。另外，应当尽量避免统⼀的、集中式的服务管理机制，对具体的⼀个服务⽽⾔，应根据业务上下⽂，选择合适的语⾔、⼯具对其进⾏构建。

## 微服务优缺点

### 优点
每个服务足够内聚，足够小，代码容易理解这样能聚焦一个指定的业务功能或业务需求
开发简单、开发效率提高，一个服务可能就是专一的只干一件事。
微服务能够被小团队单独开发，这个小团队是2到5人的开发人员组成。
微服务是松耦合的，是有功能意义的服务，无论是在开发阶段或部署阶段都是独立的。
微服务能使用不同的语言开发。
易于和第三方集成，微服务允许容易且灵活的方式集成自动部署，通过持续集成工具，如Jenkins, Hudson, bamboo 。
微服务易于被一个开发人员理解，修改和维护，这样小团队能够更关注自己的工作成果。无需通过合作才能体现价值。
微服务允许你利用融合最新技术。
微服务只是业务逻辑的代码，不会和HTML,CSS 或其他界面组件混合。
每个微服务都有自己的存储能力，可以有自己的数据库。也可以有统一数据库。


### 缺点
开发人员要处理分布式系统的复杂性
多服务运维难度，随着服务的增加，运维的压力也在增大
系统部署依赖
服务间通信成本
数据一致性
系统集成测试
性能监控……

## 微服务技术栈有哪些

| 微服务条目                               | 落地技术                                                    |
| ---------------------------------------- | ----------------------------------------------------------- |
| 服务开发                                 | Springboot、Spring、SpringMVC                               |
| 服务配置与管理                           | Netflix2公司的Archaius、阿里的Diamond等                     |
| 服务注册与发现                           | Eureka、Consul、Zookeeper等                                 |
| 服务调用                                 | Rest、RPC、gRPC                                             |
| 服务熔断器                               | Hystrix、Envoy等                                            |
| 负载均衡                                 | Ribbon、Nginx等                                             |
| 服务接口调用（客户端调用服务的简化工具） | Feign等                                                     |
| 消息队列                                 | Kafka、RabbitMQ、ActiveMQ等                                 |
| 服务配置中心管理                         | SpringCloudConfig、Chef等                                   |
| 服务路由(API网关)                        | Zuul等                                                      |
| 服务监控                                 | Zabbix、Nagios、Metrics、Spectator等                        |
| 全链路追踪                               | Zipkin,Brave、Dapper等                                      |
| 服务部署                                 | Docker、OpenStack、Kubernetes等                             |
| 数据流操作开发包                         | SpringCloud Stream(封装与Redis,Rabbit、Kafka等发送接收消息) |
| 事件消息总线                             | Spring Cloud Bus                                            |


## 为什么选择SpringCloud作为微服务架构
### 选型依据
整体解决方案和框架成熟度
社区热度
可维护性
学习曲线

### 当前各大IT公司用的微服务架构有哪些?
阿里Dubbo/HSF
京东JSF
新浪微博Motan
当当网DubboX

### 各微服务框架对比
| 功能点/服务框架 | Netflix/Spring cloud                                         | Motan                                                        | gRPC                      | Thrift   | Dubbo/DubboX     |
| --------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------- | -------- | ---------------- |
| 功能定位        | 完整的微服务框架                                             | RPC框架，但整合了ZK或Consul,实现集群环境的基本的服务注册/发现 | RPC框架                   | RPC框架  | 服务框架         |
| 支持Rest        | 是，Ribbon支持多种可插拔的序列化选择                         | 否                                                           | 否                        | 否       | 否               |
| 支持RPC         | 否                                                           | 是(Hession2)                                                 | 是                        | 是       | 是               |
| 支持多语言      | 是(Rest形式)？                                               | 否                                                           | 是                        | 是       | 否               |
| 服务注册/发现   | 是(Eureka)，Eureka服务注册表，karyon服务的框架支持服务自注册和健康检查 | 是(zookeeer/consul）                                         | 否                        | 否       | 是               |
| 负载均衡        | 是（服务端zuul+客户端Ribbon）Zuul-服务，动态路由 云端负载均衡 Eureka(针对中间层服务器) | 是（客户端）                                                 | 否                        | 否       | 是（客户端）     |
| 配置服务        | Netfix Archaius Spring cloud Config Server 集中配置          | 是(zookeeper提供)                                            | 否                        | 否       | 否               |
| 服务调用链监控  | 是(zuul)  Zuul提供边缘服务，API网关                          | 否                                                           | 否                        | 否       | 否               |
| 高可用/容错     | 是（服务端Hystrix+客户端Ribbon）                             | 是（客户端）                                                 | 否                        | 否       | 是（客户端）     |
| 典型应用案例    | Netflix                                                      | Sina                                                         | Google                    | Facebook |                  |
| 社区活跃程度    | 高                                                           | 一般                                                         | 高                        | 一般     | 已经不维护了     |
| 学习难度        | 中等                                                         | 低                                                           | 高                        | 高       | 低               |
| 文档丰富度      | 高                                                           | 一般                                                         | 一般                      | 一般     | 高               |
| 其他            | Spring Cloud Bus为我们的应用程序带来了更多的管理端点         | 支持降级                                                     | Netflix内部在开发集成gRPC | IDL定义  | 实践的公司比较多 |



## 各种架构区别
单机版	A11 In One
	eclipse工作空间里面只有一个工程

Tmall
	com.atguigu.service
	商品/交易/积分/订单。。。。。。。

分布式，
	专业的事情交给专业的人做，尽量降级耦合度


------------

ALL In One单机系统
可以看作eclisp里面只有一个大的工程，
商品/订单/交易/库存.···…
war
---分布式系统
各个模块/服务，各自独立出来，分灶吃饭
各自做小的一个进程，让专业的人专业的模块，来做专业的事情
独立部署
拆分
各自独立的进程